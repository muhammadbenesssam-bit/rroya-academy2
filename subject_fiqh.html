<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø±Ø¤ÙŠØ© - Ø§Ù„ÙÙ‚Ù‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'raaya-green': '#a7f3d0', 
                        'raaya-beige': '#f5f5dc',
                        'raaya-sky': '#87ceeb', 
                        'raaya-dark': '#1e293b', 
                        'raaya-light': '#ffffff',
                    },
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-raaya-beige text-gray-800 transition-colors duration-300 dark:bg-raaya-dark dark:text-raaya-light">
    
    <header class="bg-raaya-light dark:bg-gray-900 shadow-md transition-colors duration-300">
        <div class="container mx-auto p-4 flex justify-between items-center max-w-7xl">
            <a href="index.html" class="text-xl md:text-2xl font-bold text-raaya-dark dark:text-raaya-light">Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø±Ø¤ÙŠØ©</a>
            <a href="level1.html" class="text-raaya-sky hover:underline font-semibold text-sm md:text-base">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø³ØªÙˆÙŠØ§Øª &rarr;</a>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8 max-w-7xl">
        <a href="level1.html" class="text-raaya-sky dark:text-raaya-green hover:underline font-semibold mb-4 block">
            &larr; Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
        </a>
        <h1 class="text-3xl md:text-4xl font-extrabold text-raaya-dark dark:text-raaya-light mb-4 border-b pb-2 border-raaya-green">
            ğŸ“š Ù…Ø§Ø¯Ø© Ø§Ù„ÙÙ‚Ù‡ (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„)
        </h1>
        
        <div class="bg-raaya-light dark:bg-gray-800 p-4 rounded-lg shadow-md mb-8">
            <h2 class="text-xl font-bold dark:text-raaya-light mb-2">Ø§Ù„ØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„Ù…Ø§Ø¯Ø©:</h2>
            <div class="w-full bg-gray-200 rounded-full h-3 dark:bg-gray-700 mb-2">
                <div id="subject-progress-bar" class="bg-raaya-green h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
            <p id="subject-progress-text" class="text-sm text-gray-600 dark:text-gray-400">0% (0/20 Ø¯Ø±Ø³)</p>
        </div>

        <div id="lessons-container" class="space-y-4">
            </div>
        
    </main>
    
    <footer class="bg-gray-200 dark:bg-gray-900 py-4 mt-12 transition-colors duration-300">
        <div class="container mx-auto text-center text-xs md:text-sm text-gray-600 dark:text-gray-400 max-w-7xl">
            <p>&copy; 2024 Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø±Ø¤ÙŠØ© Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠØ©.</p>
            <p class="mt-1 font-semibold text-raaya-dark dark:text-raaya-light">ÙƒÙ† Ø°Ø§ Ø£Ø«Ø±</p>
        </div>
    </footer>

    <script type="module">
        // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©: isLessonOpen Ù„Ù„ØªØ­Ù‚Ù‚ØŒ updateSubjectProgressBar Ù„Ù„Ø¹Ø±Ø¶
        import { isLessonOpen, updateSubjectProgressBar } from './js/progress_logic.js';
        
        const SUBJECT_NAME = 'fiqh';

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø±ÙˆØ³ (ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©)
        const fiqhLessons = [
            { title: "Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø¹Ù„Ù… Ø§Ù„ÙÙ‚Ù‡ ÙˆØ£Ù‚Ø³Ø§Ù…Ù‡", videoId: "example_fiqh_1" },
            { title: "Ø§Ù„Ø·Ù‡Ø§Ø±Ø© ÙˆØ£Ù‡Ù…ÙŠØªÙ‡Ø§", videoId: "example_fiqh_2" },
            { title: "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…ÙŠØ§Ù‡ ÙˆØ§Ù„Ù†Ø¬Ø§Ø³Ø§Øª", videoId: "example_fiqh_3" },
            { title: "Ø§Ù„ÙˆØ¶ÙˆØ¡: ÙØ±ÙˆØ¶Ù‡ ÙˆØ³Ù†Ù†Ù‡", videoId: "example_fiqh_4" },
            { title: "Ø§Ù„ØºØ³Ù„: Ù…ÙˆØ¬Ø¨Ø§ØªÙ‡ ÙˆÙƒÙŠÙÙŠØªÙ‡", videoId: "example_fiqh_5" },
            { title: "Ø§Ù„ØªÙŠÙ…Ù…: Ø´Ø±ÙˆØ·Ù‡ ÙˆÙ…Ø¨Ø·Ù„Ø§ØªÙ‡", videoId: "example_fiqh_6" },
            { title: "Ø§Ù„ØµÙ„Ø§Ø©: Ø´Ø±ÙˆØ·Ù‡Ø§ ÙˆØ£Ø±ÙƒØ§Ù†Ù‡Ø§", videoId: "example_fiqh_7" },
            { title: "ÙƒÙŠÙÙŠØ© Ø£Ø¯Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø© ÙˆØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©", videoId: "example_fiqh_8" },
            { title: "Ø³Ø¬ÙˆØ¯ Ø§Ù„Ø³Ù‡Ùˆ ÙˆØ³Ø¬ÙˆØ¯ Ø§Ù„ØªÙ„Ø§ÙˆØ©", videoId: "example_fiqh_9" },
            { title: "ØµÙ„Ø§Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹Ø© ÙˆØ£Ø­ÙƒØ§Ù…Ù‡Ø§", videoId: "example_fiqh_10" },
            { title: "ØµÙ„Ø§Ø© Ø§Ù„Ø¬Ù…Ø¹Ø© ÙˆØ§Ù„Ø¹ÙŠØ¯ÙŠÙ†", videoId: "example_fiqh_11" },
            { title: "Ø£Ø­ÙƒØ§Ù… ØµÙ„Ø§Ø© Ø§Ù„Ù…Ø³Ø§ÙØ± ÙˆØ§Ù„Ù…Ø±ÙŠØ¶", videoId: "example_fiqh_12" },
            { title: "Ø§Ù„Ø²ÙƒØ§Ø©: Ø´Ø±ÙˆØ·Ù‡Ø§ ÙˆØ£Ù†ÙˆØ§Ø¹Ù‡Ø§", videoId: "example_fiqh_13" },
            { title: "Ø²ÙƒØ§Ø© Ø§Ù„ÙØ·Ø± ÙˆØ²ÙƒØ§Ø© Ø§Ù„Ù…Ø§Ù„", videoId: "example_fiqh_14" },
            { title: "Ø§Ù„ØµÙˆÙ…: Ø£Ø±ÙƒØ§Ù†Ù‡ ÙˆÙ…Ø¨Ø·Ù„Ø§ØªÙ‡", videoId: "example_fiqh_15" },
            { title: "Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ­Ø© Ù„Ù„Ø¥ÙØ·Ø§Ø± ÙˆÙ‚Ø¶Ø§Ø¤Ù‡Ø§", videoId: "example_fiqh_16" },
            { title: "Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø©: Ø´Ø±ÙˆØ·Ù‡Ù…Ø§ ÙˆØ£Ø±ÙƒØ§Ù†Ù‡Ù…Ø§", videoId: "example_fiqh_17" },
            { title: "ØµÙØ© Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø© ÙˆØ§Ù„Ø£Ù†Ø³Ø§Ùƒ", videoId: "example_fiqh_18" },
            { title: "Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ø£Ø¶Ø­ÙŠØ© ÙˆØ§Ù„Ø¹Ù‚ÙŠÙ‚Ø©", videoId: "example_fiqh_19" },
            { title: "Ù…Ù„Ø®Øµ Ù„Ø£Ù‡Ù… Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„ÙÙ‚Ù‡", videoId: "example_fiqh_20" },
        ];

        function createLessonsList(subjectName, lessonsArray, containerId) {
            const lessonsContainer = document.getElementById(containerId);
            if (!lessonsContainer) return;

            lessonsArray.forEach((lesson, index) => {
                const lessonNumber = index + 1;
                const lessonId = `${subjectName}-${lessonNumber}`;
                // ğŸ’¡ ÙŠØªÙ… Ù‡Ù†Ø§ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ù„ÙØªØ­ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„ Ù„Ù„Ø²ÙˆØ§Ø± ğŸ’¡
                const isOpen = isLessonOpen(subjectName, lessonNumber); 

                const lessonLink = document.createElement('a');
                
                lessonLink.classList.add('block', 'p-4', 'rounded-lg', 'shadow-md', 'transition', 'duration-300', 'flex', 'justify-between', 'items-center', 'mt-2');

                if (isOpen) {
                    // Ø§Ù„Ø¯Ø±Ø³ Ù…ÙØªÙˆØ­: Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­ ÙˆØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø²Ø±Ù‚Ø§Ø¡/Ø®Ø¶Ø±Ø§Ø¡
                    lessonLink.href = `lesson.html?id=${lessonId}&vid=${lesson.videoId}&subj=fiqh`;
                    lessonLink.classList.add('bg-raaya-light', 'dark:bg-gray-700', 'hover:bg-raaya-sky/20', 'cursor-pointer');
                    lessonLink.innerHTML = `
                        <span class="text-lg font-semibold dark:text-raaya-light">Ø§Ù„Ø¯Ø±Ø³ Ø±Ù‚Ù… ${lessonNumber}: ${lesson.title}</span>
                        <span class="text-raaya-green">Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¯Ø±Ø³ &rarr;</span>
                    `;
                } else {
                    // Ø§Ù„Ø¯Ø±Ø³ Ù…ØºÙ„Ù‚: Ø±Ø§Ø¨Ø· ÙØ§Ø±Øº ÙˆØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø±Ù…Ø§Ø¯ÙŠØ© Ù…Ø¹ Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
                    lessonLink.href = '#';
                    lessonLink.classList.add('bg-gray-200', 'dark:bg-gray-800', 'cursor-not-allowed', 'opacity-70');
                    lessonLink.innerHTML = `
                        <span class="text-lg font-semibold text-gray-500 dark:text-gray-400">Ø§Ù„Ø¯Ø±Ø³ Ø±Ù‚Ù… ${lessonNumber}: ${lesson.title}</span>
                        <span class="text-red-500">Ø§Ù„Ø¯Ø±Ø³ Ù…ØºÙ„Ù‚ ğŸ”’</span>
                    `;
                    // Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± ØªÙ…Ø§Ù…Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…ØºÙ„Ù‚Ø©
                    lessonLink.addEventListener('click', (e) => { e.preventDefault(); });
                }
                lessonsContainer.appendChild(lessonLink);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            createLessonsList(SUBJECT_NAME, fiqhLessons, 'lessons-container');
            updateSubjectProgressBar(SUBJECT_NAME);
        });
    </script>
</body>
</html>